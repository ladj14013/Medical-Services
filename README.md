Lakhdar

# تطبيق الخدمات الطبية - Firebase Studio

هذا مشروع Next.js يهدف إلى إنشاء منصة شاملة للخدمات الطبية تمكن المرضى من البحث عن الأطباء وحجز المواعيد، وتوفر للأطباء أدوات لإدارة مواعيدهم والتواصل مع زملائهم، بالإضافة إلى لوحة تحكم للمسؤولين.

---

## رحلة تطوير المشروع (من البداية حتى الآن)

بدأ هذا المشروع كفكرة وتطور تدريجيًا ليصبح تطبيقًا متكاملًا. إليك ملخص للخطوات والميزات التي قمنا ببنائها معًا:

### 1. الإعداد الأولي والتقنيات الأساسية
- **الأساس:** تم بناء المشروع باستخدام **Next.js** مع **TypeScript**، مما يوفر بنية قوية وقابلة للتطوير.
- **الواجهة:** اعتمدنا على مكتبة **ShadCN/UI** مع **Tailwind CSS** لإنشاء واجهة مستخدم حديثة وجذابة وقابلة للتخصيص.
- **الذكاء الاصطناعي:** تم دمج **Genkit** (وتحديدًا Google Gemini) لتوفير ميزات ذكية مثل فحص الأعراض واقتراح المواعيد البديلة.

### 2. بناء الميزات الأساسية (البيانات الثابتة)
- **البحث عن طبيب:** بدأنا بإنشاء واجهة تتيح للمستخدمين البحث عن أطباء، معتمدة في البداية على بيانات ثابتة (static data) من ملف `src/lib/data.ts`.
- **صفحات الأطباء:** تم إنشاء صفحات ملفات شخصية ديناميكية لكل طبيب لعرض معلوماته مثل التخصص والسيرة الذاتية.
- **نظام الحجز الأولي:** تم بناء واجهة حجز مبدئية تتيح للمستخدم اختيار تاريخ ووقت، ولكنها لم تكن متصلة بقاعدة بيانات حقيقية.

### 3. الانتقال إلى قاعدة بيانات حقيقية (MySQL)
- **الحاجة للتخزين الدائم:** أدركنا أن البيانات الثابتة لا تكفي، وأننا بحاجة إلى قاعدة بيانات حقيقية لتخزين معلومات الأطباء والمواعيد.
- **الإعداد المحلي:** أرشدتك لإعداد خادم **MySQL** محلي وأداة **MySQL Workbench** لإدارة قاعدة البيانات.
- **تصميم الجداول:** قمنا بإنشاء جدولين أساسيين:
    - `doctors`: لتخزين معلومات الأطباء وحالتهم (موافق عليه، قيد الانتظار، مرفوض).
    - `appointments`: لتخزين جميع المواعيد المحجوزة.
- **الربط بالتطبيق:** تم دمج مكتبة `mysql2/promise` وإنشاء ملف `src/lib/db.ts` لربط تطبيق Next.js بقاعدة بيانات MySQL المحلية الخاصة بك.

### 4. بناء طبقة الواجهة البرمجية (API Layer)
لجعل التطبيق ديناميكيًا بالكامل، قمنا بتحويل جميع عمليات قراءة البيانات لتتم عبر واجهات برمجة تطبيقات (APIs) تتصل مباشرة بقاعدة البيانات:
- `GET /api/doctors`: لجلب قائمة الأطباء المعتمدين.
- `GET /api/doctors/[id]`: لجلب ملف طبيب معين.
- `POST /api/doctors`: **للسماح للأطباء بتسجيل أنفسهم**، حيث يتم الآن حفظ طلباتهم في قاعدة البيانات بحالة `pending`.
- `GET /api/appointments`: لجلب المواعيد (للمريض أو الطبيب).
- `POST /api/appointments`: لجعل **عملية حجز المواعيد حقيقية**، حيث يتم الآن حفظ كل موعد جديد في قاعدة بياناتك.
- `PATCH /api/doctors/[id]`: للسماح للمسؤول بتحديث حالة الطبيب (الموافقة أو الرفض).

### 5. تطوير لوحات التحكم والأدوار
- **نظام الأدوار:** تم تحديد ثلاثة أدوار رئيسية في النظام: **مريض**، **طبيب**، و**مسؤول**.
- **لوحة تحكم المسؤول (`/dashboard`):**
    - مراجعة طلبات تسجيل الأطباء الجدد والموافقة عليها أو رفضها، مع حفظ التغييرات مباشرة في قاعدة البيانات.
    - **عارض قاعدة البيانات:** أضفنا ميزة فريدة تتيح للمسؤول عرض محتويات جدولي `doctors` و `appointments` مباشرة من داخل التطبيق.
- **نظام تسجيل الدخول للمسؤول:** قمنا بتأمين لوحة التحكم عن طريق إنشاء نظام تسجيل دخول بسيط ببيانات اعتماد ثابتة (`admin@medical.app` و `admin123`).
- **لوحة تحكم المريض (`/dashboard/patient`):** صفحة لعرض المواعيد القادمة للمريض المسجل دخوله.
- **لوحة تحكم الطبيب (`/dashboard/doctor`):** صفحة لإدارة مواعيد المرضى للطبيب المسجل دخوله.

### 6. دمج ميزات الذكاء الاصطناعي
- **فاحص الأعراض:** في الصفحة الرئيسية، يمكن للمستخدمين الآن إدخال أعراضهم، ويقوم الذكاء الاصطناعي بتحليلها واقتراح التخصص الطبي المناسب لزيارته.
- **اقتراحات المواعيد البديلة:** عند محاولة حجز موعد غير متاح، يقوم النظام تلقائيًا باستخدام الذكاء الاصطناعي لاقتراح مواعيد أخرى مناسبة أو أطباء آخرين في نفس التخصص.

---

## كيفية التشغيل محليًا

لمعاينة وتشغيل المشروع على جهاز الكمبيوتر الخاص بك، اتبع الخطوات التالية.

### المتطلبات الأساسية:

1.  **تثبيت Node.js:** تأكد من أن Node.js (الإصدار 18 أو أحدث) مثبت على جهازك. يمكنك تنزيله من [nodejs.org](https://nodejs.org/).
2.  **قاعدة بيانات MySQL:** لتشغيل التطبيق مع قاعدة بيانات حقيقية، ستحتاج إلى خادم MySQL قيد التشغيل. تأكد من إعداد قاعدة البيانات والجداول كما فعلنا.

### الخطوات:

1.  **افتح الطرفية (Terminal):** افتح نافذة الأوامر (Command Prompt, PowerShell, أو Terminal) وانتقل إلى مجلد المشروع الرئيسي.
2.  **تثبيت الحزم:** قم بتشغيل الأمر التالي لتثبيت جميع الحزم والمكتبات التي يعتمد عليها المشروع.

    ```bash
    npm install
    ```
3. **إعداد متغيرات البيئة:** قم بإنشاء نسخة من ملف `.env.example` وسمها `.env` ثم املأ تفاصيل الاتصال بقاعدة البيانات الخاصة بك (DB_HOST, DB_USER, DB_PASSWORD, DB_NAME, DB_PORT).

4.  **تشغيل خادم التطوير:** بعد اكتمال التثبيت، قم بتشغيل الأمر التالي لبدء الخادم المحلي.

    ```bash
    npm run dev
    ```

5.  **فتح المشروع في المتصفح:** سيقوم الخادم بالعمل. افتح متصفح الويب الخاص بك وانتقل إلى العنوان التالي:

    [http://localhost:9002](http://localhost:9002)

ستتمكن الآن من رؤية التطبيق والتفاعل معه مباشرة على جهازك. أي تغييرات تجريها على الكود ستظهر تلقائيًا في المتصفح.

---

## كيفية ربط هذا المشروع بـ GitHub

لإدارة إصدارات الكود الخاص بك والتعاون مع الآخرين، اتبع هذه الخطوات لربط مشروعك بحسابك على GitHub.

**ملاحظة هامة:** المشروع الذي تعمل عليه الآن موجود في بيئة Firebase Studio السحابية. لربطه بـ GitHub، يجب عليك أولاً تنزيله إلى جهاز الكمبيوتر الخاص بك.

### المتطلبات الأساسية:

1.  **تثبيت Git:** تأكد من أن Git مثبت على جهاز الكمبيوتر الخاص بك. يمكنك تنزيله من [git-scm.com](https://git-scm.com/).
2.  **حساب GitHub:** يجب أن يكون لديك حساب على [GitHub](https://github.com/).

---

### الخطوات:

#### الخطوة 1: تنزيل المشروع إلى جهازك

1.  من القائمة العلوية في Firebase Studio، اختر **File** ثم **Save Workspace As...**.
2.  سيؤدي هذا إلى تنزيل المشروع بالكامل كملف `.zip`. **ابحث عن هذا الملف في مجلد "التنزيلات" (Downloads) لديك.**
3.  قم بفك ضغط الملف في المكان الذي تريده على جهازك. الآن أصبح لديك نسخة محلية من المشروع.

#### الخطوة 2: إنشاء مستودع جديد على GitHub

1.  اذهب إلى [GitHub.com](https://github.com/) وقم بتسجيل الدخول.
2.  في الزاوية العلوية اليمنى، انقر فوق أيقونة `+` واختر **"New repository"**.
3.  أعطِ المستودع اسمًا (على سبيل المثال، `medical-services-app`).
4.  اختر ما إذا كان المستودع سيكون **عامًا (Public)** أو **خاصًا (Private)**.
5.  **مهم جدًا:** **لا تقم** بتحديد أي من الخيارات لتهيئة المستودع بملف `README` أو `.gitignore` أو `license`. مشروعك المحلي يحتوي بالفعل على هذه الملفات، وتحديد هذه الخيارات سيسبب تعارضًا.
6.  انقر على زر **"Create repository"**.

#### الخطوة 3: تهيئة Git في مشروعك المحلي

1.  افتح الطرفية (Terminal أو Command Prompt).
2.  **انتقل إلى مجلد المشروع الذي قمت بفك ضغطه في الخطوة 1**. يمكنك استخدام الأمر `cd` (Change Directory) للوصول إليه. مثال: `cd Downloads/medical-services-app`.
3.  بمجرد دخولك إلى المجلد الصحيح، قم بتهيئة Git لإنشاء مستودع محلي جديد. الأمر `-b main` يضمن أن اسم الفرع الرئيسي هو `main`.

    ```bash
    git init -b main
    ```

#### الخطوة 4: إضافة الملفات إلى المستودع المحلي وعمل Commit

1.  أضف جميع الملفات في مشروعك إلى منطقة التجهيز (staging area) ليتم تتبعها.

    ```bash
    git add .
    ```

2.  قم بعمل أول `commit`، والذي يحفظ لقطة من حالة مشروعك الحالية.

    ```bash
    git commit -m "Initial commit"
    ```

#### الخطوة 5: ربط المستودع المحلي بالمستودع على GitHub

1.  في صفحة مستودعك على GitHub التي أنشأتها للتو، ستجد قسمًا بعنوان **"…or push an existing repository from the command line"**. انسخ الأمر الذي يبدأ بـ `git remote add origin`. سيبدو مشابهًا لهذا:

    ```bash
    git remote add origin https://github.com/your-username/your-repository-name.git
    ```

2.  الصق هذا الأمر في الطرفية الخاصة بك وقم بتنفيذه. هذا الأمر يخبر Git بأن هناك مستودعًا بعيدًا يسمى `origin` موجود في هذا الرابط.

#### الخطوة 6: رفع الكود إلى GitHub

1.  أخيرًا، قم برفع (push) الكود من فرع `main` المحلي إلى مستودع `origin` البعيد على GitHub.

    ```bash
    git push -u origin main
    ```

    *   الخيار `-u` يربط فرعك المحلي بالفرع البعيد، لذا في المرات القادمة، يمكنك استخدام `git push` فقط.

---

**تهانينا!** لقد تم الآن ربط مشروعك بـ GitHub. يمكنك الآن رؤية جميع ملفاتك على موقع GitHub. عند إجراء أي تغييرات جديدة في المستقبل، يمكنك استخدام `git add .`، `git commit -m "رسالة تصف التغيير"`، و `git push` لرفعها.
